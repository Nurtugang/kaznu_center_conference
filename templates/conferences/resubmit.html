{% extends "conferences/base_conf.html" %}

{% block content %}
<section class="py-12 flex justify-center">
    <div class="w-full max-w-2xl">
        <div class="bg-white rounded-[2.5rem] p-10 shadow-2xl border border-gray-100">
            <h2 class="text-2xl font-bold text-dark mb-2">Загрузка новой версии</h2>
            <p class="text-gray-400 text-[10px] font-bold uppercase tracking-widest mb-8">
                Работа: <span class="text-dark">"{{ submission.title }}"</span>
            </p>

            <form method="post" enctype="multipart/form-data" class="space-y-6">
                {% csrf_token %}
                
                {% if last_version.admin_comment %}
                <div class="p-6 bg-blue-50 rounded-2xl border border-blue-100 mb-6">
                    <p class="text-[10px] font-bold text-blue-800 uppercase mb-2 flex items-center gap-2">
                        <i class="fas fa-exclamation-circle"></i> Замечание к версии №{{ last_version.version_number }}:
                    </p>
                    <p class="text-sm text-blue-900 leading-relaxed">{{ last_version.admin_comment }}</p>
                </div>
                {% else %}
                <div class="p-4 bg-gray-50 rounded-2xl border border-gray-100 mb-6">
                    <p class="text-[10px] font-bold text-gray-400 uppercase text-center tracking-widest">Загрузите исправленный файл ниже</p>
                </div>
                {% endif %}

                <div>
                    <label class="block text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-3">Новый файл (PDF, DOCX, DOC)</label>
                    <input type="file" name="file" required 
                           accept=".pdf,.doc,.docx"
                           class="w-full px-5 py-3 bg-gray-50 border border-gray-100 rounded-xl outline-none focus:border-brand/30 transition-colors text-xs">
                </div>

                <div>
                    <label class="block text-[10px] font-bold text-gray-400 uppercase tracking-widest mb-3">Ваш комментарий (что исправлено)</label>
                    <textarea name="author_comment" rows="4" 
                              class="w-full px-5 py-3 bg-gray-50 border border-gray-100 rounded-xl outline-none focus:border-brand/30 transition-colors text-xs" 
                              placeholder="Например: Исправлены ошибки в списке литературы и оформление таблиц..."></textarea>
                </div>

                <button type="submit" class="w-full bg-brand text-white py-4 rounded-2xl font-bold uppercase text-xs tracking-widest hover:bg-brand_dark transition-all shadow-lg hover:shadow-brand/20">
                    <i class="fas fa-cloud-upload-alt mr-2"></i> Отправить на проверку
                </button>
                
                <a href="{% url 'conferences:profile' %}" class="block text-center text-[10px] font-bold text-gray-400 uppercase mt-4 hover:text-dark transition-colors">
                    Отмена
                </a>
            </form>
        </div>
    </div>
</section>
{% endblock %}