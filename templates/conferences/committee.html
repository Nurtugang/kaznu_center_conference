{% extends "conferences/base_conf.html" %}
{% load i18n %}
{% load static %}

{% block title %}{% trans "Организационный комитет" %} | {{ conference.title }}{% endblock %}

{% block content %}
<div class="bg-white min-h-screen py-12 md:py-16">
    <div class="container mx-auto px-4 sm:px-6 max-w-6xl">

        <div class="mb-16 border-b border-gray-100 pb-8 text-center md:text-left">
            <h1 class="text-3xl md:text-4xl font-bold text-gray-900 tracking-tight mb-3">
                {% trans "Организационный комитет" %}
            </h1>
            <p class="text-gray-500 text-sm uppercase tracking-widest font-semibold">
                {{ conference.short_title }} &mdash; {% trans "Научный и организационный состав" %}
            </p>
        </div>

        {% if committee_members %}

            <div class="mb-20">
                <div class="flex items-center gap-4 mb-10">
                    <div class="h-8 w-1 bg-[#8a1538] rounded-full"></div>
                    <h2 class="text-xl font-bold text-gray-900 uppercase tracking-wide">
                        {% trans "Руководство" %}
                    </h2>
                </div>

                <div class="grid grid-cols-1 lg:grid-cols-2 gap-10">
                    {% for member in committee_members %}
                        {% if member.role == 'chair' or member.role == 'vice_chair' %}
                        <div class="flex flex-col sm:flex-row gap-6 bg-white">

                            <div class="shrink-0">
                                <div class="w-32 h-40 sm:w-40 sm:h-48 rounded-2xl overflow-hidden shadow-md bg-gray-100 relative">
                                    {% if member.photo %}
                                        <img src="{{ member.photo.url }}" alt="{{ member.full_name }}" class="w-full h-full object-cover">
                                    {% else %}
                                        <div class="w-full h-full flex items-center justify-center text-gray-300">
                                            <i class="fas fa-user text-4xl"></i>
                                        </div>
                                    {% endif %}
                                </div>
                            </div>

                            <div class="py-2">
                                <span class="inline-block px-3 py-1 mb-3 rounded-md text-[10px] font-bold uppercase tracking-wider
                                    {% if member.role == 'chair' %}bg-[#8a1538] text-white{% else %}bg-gray-100 text-gray-600{% endif %}">
                                    {% if member.role == 'chair' %}
                                        {% trans "Председатель" %}
                                    {% else %}
                                        {% trans "Зам. председателя" %}
                                    {% endif %}
                                </span>

                                <h3 class="text-xl font-serif font-bold text-gray-900 mb-2 leading-tight">
                                    {{ member.full_name }}
                                </h3>

                                <p class="text-sm font-semibold text-[#8a1538] uppercase tracking-wide mb-1">
                                    {{ member.position }}
                                </p>

                                {% if member.organization %}
                                    <p class="text-sm text-gray-500 italic mb-3">
                                        {{ member.organization }}
                                    </p>
                                {% endif %}

                                {% if member.bio %}
                                    <p class="text-sm text-gray-600 leading-relaxed line-clamp-3">
                                        {{ member.bio }}
                                    </p>
                                {% endif %}
                            </div>
                        </div>
                        {% endif %}
                    {% endfor %}
                </div>
            </div>

            <div>
                <div class="flex items-center gap-4 mb-10 border-t border-gray-100 pt-10">
                    <div class="h-8 w-1 bg-gray-300 rounded-full"></div>
                    <h2 class="text-xl font-bold text-gray-900 uppercase tracking-wide">
                        {% trans "Члены комитета" %}
                    </h2>
                </div>

                <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-x-8 gap-y-12">
                    {% for member in committee_members %}
                        {% if member.role == 'member' or member.role == 'secretary' %}
                        <div class="flex flex-col items-start group">

                            <div class="w-full aspect-[3/4] rounded-xl overflow-hidden bg-gray-50 mb-4 shadow-sm border border-gray-100 relative">
                                {% if member.photo %}
                                    <img src="{{ member.photo.url }}" alt="{{ member.full_name }}" class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-500">
                                {% else %}
                                    <div class="w-full h-full flex items-center justify-center text-gray-300">
                                        <i class="fas fa-user text-3xl"></i>
                                    </div>
                                {% endif %}

                                {% if member.role == 'secretary' %}
                                    <div class="absolute bottom-2 left-2 right-2 bg-white/90 backdrop-blur-sm py-1 px-2 rounded text-center shadow-sm">
                                        <span class="text-[9px] font-bold text-[#8a1538] uppercase tracking-widest">
                                            {% trans "Секретарь" %}
                                        </span>
                                    </div>
                                {% endif %}
                            </div>

                            <h4 class="text-lg font-bold text-gray-900 leading-tight mb-1 group-hover:text-[#8a1538] transition-colors">
                                {{ member.full_name }}
                            </h4>

                            <p class="text-xs font-bold text-gray-500 uppercase tracking-wide mb-1">
                                {{ member.position }}
                            </p>

                            {% if member.organization %}
                                <p class="text-sm text-gray-400 italic leading-snug">
                                    {{ member.organization }}
                                </p>
                            {% endif %}
                        </div>
                        {% endif %}
                    {% endfor %}
                </div>
            </div>

        {% else %}
            <div class="py-24 text-center bg-gray-50 rounded-2xl border border-dashed border-gray-200">
                <p class="text-gray-400 font-bold uppercase tracking-widest text-sm">
                    {% trans "Информация обновляется" %}
                </p>
            </div>
        {% endif %}

    </div>
</div>
{% endblock %}